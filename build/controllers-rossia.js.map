{"version":3,"sources":["controllers-rossia.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","PopupMealRossiyaController","utils","$timeout","$scope","mealMenuSubgroupMobileChange","vm","mealMenuSubgroupMobile","mealMenuSubgroup","updateNextPrevState","passengers","currentPassengerIndex","nextPassenger","prevPassenger","nextPassengerIndex","prevPassengerIndex","j","service","availableByPassengerSegments","currentFlightIndex","switchNext","selectFlightPassenger","switchPrev","this","close","jQuery","fancybox","subgroupItems","createOptionsForUiSelect","subgroups","$watch","angular","component","templateUrl","controller","controllerAs","bindings","mealMenu","passenger","flight","setPassengerFlightMeal","clearPassengerFlightMeal","mealImagesPath","2","console","log","./components/popup-meal-rossiya/popup-meal-rossiya"],"mappings":"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","file":"controllers-rossia.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n\"use strict\";\n\nangular.module('app').component('popupMealRossiya', {\n    templateUrl: 'components/popup-meal-rossiya/popup-meal-rossiya.html',\n    controller: ['utils', '$timeout', '$scope', PopupMealRossiyaController],\n    controllerAs: 'vm',\n    bindings: {\n        mealMenu: '=menu',\n        passenger: '=passenger',\n        currentPassengerIndex: '=',\n        currentFlightIndex: '=',\n        passengers: '=passengers',\n        flight: '=flight',\n        setPassengerFlightMeal: '=handler',\n        clearPassengerFlightMeal: '&remove',\n        subgroups: '=subgroups',\n        mealImagesPath: '=path',\n        service: '=',\n        selectFlightPassenger: '=select'\n    }\n});\n\nfunction PopupMealRossiyaController(utils, $timeout, $scope) {\n\n    var vm = this;\n    vm.close = jQuery.fancybox.close;\n    vm.mealMenuSubgroupMobileChange = mealMenuSubgroupMobileChange;\n    vm.mealMenuSubgroup = false;\n    vm.mealMenuSubgroupMobile = 'false';\n    vm.subgroupItems = utils.createOptionsForUiSelect(vm.subgroups, 'all'); \n    vm.switchNext = switchNext;\n    vm.switchPrev = switchPrev;\n\n    updateNextPrevState();\n\t\n\t$scope.$watch('vm.currentPassengerIndex', function () {\n        updateNextPrevState();\n    });\n\n    function mealMenuSubgroupMobileChange() {\n        if (vm.mealMenuSubgroupMobile === false) {\n            vm.mealMenuSubgroup = false;\n        } else {\n            vm.mealMenuSubgroup = vm.mealMenuSubgroupMobile * 1;\n        }\n    }\n\n    function updateNextPrevState() {\n\t\tfor (var i=0; i<vm.passengers.length; i++) {\n            if (i === vm.currentPassengerIndex) {\n\t\t\t\tvm.nextPassenger = false;\n\t\t\t\tvm.prevPassenger = false;\n\t\t\t\tvm.nextPassengerIndex = false;\n\t\t\t\tvm.prevPassengerIndex = false;\n\t\t\t\tfor (var j=i+1; j<vm.passengers.length; j++) {\n\t\t\t\t\tif (\n\t\t\t\t\t\tvm.service.availableByPassengerSegments[j] &&\n\t\t\t\t\t\tvm.service.availableByPassengerSegments[j][vm.currentFlightIndex]\n\t\t\t\t\t) {\n\t\t\t\t\t\tvm.nextPassenger = vm.passengers[j];\n\t\t\t\t\t\tvm.nextPassengerIndex = j;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (var j=i-1; j>-1; j--) {\n\t\t\t\t\tif (\n\t\t\t\t\t\tvm.service.availableByPassengerSegments[j] &&\n\t\t\t\t\t\tvm.service.availableByPassengerSegments[j][vm.currentFlightIndex]\n\t\t\t\t\t) {\n\t\t\t\t\t\tvm.prevPassenger = vm.passengers[j];\n\t\t\t\t\t\tvm.prevPassengerIndex = j;\n\t\t\t\t\t}\n\t\t\t\t}\n            }\n        }\n    }\n\n    function switchNext() {\n        for (var i=0; i<vm.passengers.length; i++) {\n            if (i === vm.currentPassengerIndex) {\n                for (var j=i+1; j<vm.passengers.length; j++) {\n\t\t\t\t\tif (\n\t\t\t\t\t\tvm.service.availableByPassengerSegments[j] &&\n\t\t\t\t\t\tvm.service.availableByPassengerSegments[j][vm.currentFlightIndex]\n\t\t\t\t\t) {\n\t\t\t\t\t\tvm.selectFlightPassenger(vm.currentFlightIndex, j);\n\t\t\t\t\t\t// Нужно дождаться применения нового currentPassengerIndex в родительском скопе\n\t\t\t\t\t\t$timeout(updateNextPrevState);\n\t\t\t\t\t}\n\t\t\t\t}\n            }\n        }\n    }\n\n    function switchPrev() {\n        for (var i=0; i<vm.passengers.length; i++) {\n            if (i === vm.currentPassengerIndex) {\n\t\t\t\tfor (var j=i-1; j>-1; j--) {\n\t\t\t\t\tif (\n\t\t\t\t\t\tvm.service.availableByPassengerSegments[j] &&\n\t\t\t\t\t\tvm.service.availableByPassengerSegments[j][vm.currentFlightIndex]\n\t\t\t\t\t) {\n\t\t\t\t\t\tvm.selectFlightPassenger(vm.currentFlightIndex, j);\n\t\t\t\t\t\t// Нужно дождаться применения нового currentPassengerIndex в родительском скопе\n\t\t\t\t\t\t$timeout(updateNextPrevState);\n\t\t\t\t\t}\n\t\t\t\t}\n            }\n        }\n    }\n\n}\n\n},{}],2:[function(require,module,exports){\n\"use strict\";\n\n\n\nconsole.log('app: ', angular.module('app'));\n\nrequire('./components/popup-meal-rossiya/popup-meal-rossiya');\n\n},{\"./components/popup-meal-rossiya/popup-meal-rossiya\":1}]},{},[2]);\n"]}