{"version":3,"sources":["controllers-rossia.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","PopupMealRossiyaController","utils","$timeout","$scope","mealMenuSubgroupMobileChange","vm","mealMenuSubgroupMobile","mealMenuSubgroup","updateNextPrevState","passengers","currentPassengerIndex","nextPassenger","prevPassenger","nextPassengerIndex","prevPassengerIndex","j","service","availableByPassengerSegments","currentFlightIndex","switchNext","passenger","selectFlightPassenger","switchPrev","this","close","jQuery","fancybox","subgroupItems","createOptionsForUiSelect","subgroups","$watch","angular","component","templateUrl","controller","controllerAs","bindings","mealMenu","flight","setPassengerFlightMeal","clearPassengerFlightMeal","getPassengerFlightMeal","mealImagesPath","2","console","log","./components/popup-meal-rossiya/popup-meal-rossiya"],"mappings":"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","file":"controllers-rossia.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n\"use strict\";\nangular.module('app').component('popupMealRossiya', {\r\n  templateUrl: 'components/popup-meal-rossiya/popup-meal-rossiya.html',\r\n  controller: ['utils', '$timeout', '$scope', PopupMealRossiyaController],\r\n  controllerAs: 'vm',\r\n  bindings: {\r\n    mealMenu: '=menu',\r\n    passenger: '=passenger',\r\n    currentPassengerIndex: '=',\r\n    currentFlightIndex: '=',\r\n    passengers: '=passengers',\r\n    flight: '=flight',\r\n    setPassengerFlightMeal: '=handler',\r\n    clearPassengerFlightMeal: '&remove',\r\n    getPassengerFlightMeal: '=get',\r\n    subgroups: '=subgroups',\r\n    mealImagesPath: '=path',\r\n    service: '=',\r\n    selectFlightPassenger: '=select'\r\n  }\r\n});\r\n\r\nfunction PopupMealRossiyaController(utils, $timeout, $scope) {\r\n\r\n  var vm = this;\r\n  vm.close = jQuery.fancybox.close;\r\n  vm.mealMenuSubgroupMobileChange = mealMenuSubgroupMobileChange;\r\n  vm.mealMenuSubgroup = false;\r\n  vm.mealMenuSubgroupMobile = 'false';\r\n  vm.subgroupItems = utils.createOptionsForUiSelect(vm.subgroups, 'all');\r\n  vm.switchNext = switchNext;\r\n  vm.switchPrev = switchPrev;\r\n\r\n  updateNextPrevState();\r\n\r\n  $scope.$watch('vm.currentPassengerIndex', function() {\r\n    updateNextPrevState();\r\n  });\r\n\r\n  function mealMenuSubgroupMobileChange() {\r\n    if (vm.mealMenuSubgroupMobile === false) {\r\n      vm.mealMenuSubgroup = false;\r\n    } else {\r\n      vm.mealMenuSubgroup = vm.mealMenuSubgroupMobile * 1;\r\n    }\r\n  }\r\n\r\n  function updateNextPrevState() {\r\n    for (var i = 0; i < vm.passengers.length; i++) {\r\n      if (i === vm.currentPassengerIndex) {\r\n        vm.nextPassenger = false;\r\n        vm.prevPassenger = false;\r\n        vm.nextPassengerIndex = false;\r\n        vm.prevPassengerIndex = false;\r\n        for (var j = i + 1; j < vm.passengers.length; j++) {\r\n          if (\r\n            vm.service.availableByPassengerSegments[j] &&\r\n            vm.service.availableByPassengerSegments[j][vm.currentFlightIndex]\r\n          ) {\r\n            vm.nextPassenger = vm.passengers[j];\r\n            vm.nextPassengerIndex = j;\r\n          }\r\n        }\r\n        for (var j = i - 1; j > -1; j--) {\r\n          if (\r\n            vm.service.availableByPassengerSegments[j] &&\r\n            vm.service.availableByPassengerSegments[j][vm.currentFlightIndex]\r\n          ) {\r\n            vm.prevPassenger = vm.passengers[j];\r\n            vm.prevPassengerIndex = j;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  function switchNext() {\r\n    passenger:\r\n    for (var i = 0; i < vm.passengers.length; i++) {\r\n      if (i === vm.currentPassengerIndex) {\r\n        for (var j = i + 1; j < vm.passengers.length; j++) {\r\n          if (\r\n            vm.service.availableByPassengerSegments[j] &&\r\n            vm.service.availableByPassengerSegments[j][vm.currentFlightIndex]\r\n          ) {\r\n            vm.selectFlightPassenger(vm.currentFlightIndex, j);\r\n            break passenger;\r\n            // Нужно дождаться применения нового currentPassengerIndex в родительском скопе\r\n            $timeout(updateNextPrevState);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  function switchPrev() {\r\n    passenger:\r\n    for (var i = 0; i < vm.passengers.length; i++) {\r\n      if (i === vm.currentPassengerIndex) {\r\n        for (var j = i - 1; j > -1; j--) {\r\n          if (\r\n            vm.service.availableByPassengerSegments[j] &&\r\n            vm.service.availableByPassengerSegments[j][vm.currentFlightIndex]\r\n          ) {\r\n            vm.selectFlightPassenger(vm.currentFlightIndex, j);\r\n            break passenger;\r\n            // Нужно дождаться применения нового currentPassengerIndex в родительском скопе\r\n            $timeout(updateNextPrevState);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n\n},{}],2:[function(require,module,exports){\n\"use strict\";\n\r\n\r\n\r\nconsole.log('app: ', angular.module('app'));\r\n\r\nrequire('./components/popup-meal-rossiya/popup-meal-rossiya');\r\n\n},{\"./components/popup-meal-rossiya/popup-meal-rossiya\":1}]},{},[2]);\n"]}