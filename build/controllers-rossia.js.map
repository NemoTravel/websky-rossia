{"version":3,"sources":["controllers-rossia.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","angular","component","templateUrl","2","3","controller","controllerAs","bindings","rfisc","active","disabled","4","InsuranceController","backend","$scope","switchService","vm","locked","service","items","modifyExtraService","getInsuranceSubmitParams","removeExtraService","onlineMode","switchServiceItem","itemNum","paxKey","selected","itemsByPassengers","orderInfo","passengers","id","item","passenger_id","params","ins","tins","productCode","this","getOrderInfo","$watch","isAllPassengersActive","every","paxServices","_","findWhere","5","MealRossiyaController","$element","utils","checkServiceRemovalProhibited","selectFirstAvailablePassengerFlight","mealCountChangeHandler","subgroupNum","mealItem","delta","selectedPassenger","segment_id","plainFlights","selectedFlight","subgroup","subgroups","amount","alreadySelectedCount","service_type","serviceType","getLimitStatus","selectFlightPassenger","flightNum","passengerNum","updateMealMenu","getFirstAvailableFlightNum","getFirstAvailablePassengerNum","mealMenu","flattenMealMenu","itemsByPassengerSegments","undefined","mealMenuSubgroup","deepMenu","flatMenu","forEach","deepMenuItems","deepMenuItem","push","setPassengerFlightMeal","selectedPassengerFlightMeal","getSelectedPassengerFlightMeal","newMealParams","then","removePassengerFlightMeal","result","passengerSegmentServices","passengerSegmentMeal","editableExtraServicesByPassengers","serviceItem","scrollToStart","passengersTableContainer","scrollTo","scrollToEnd","scrollWidth","mobileTableScrollHandler","scrollLeft","clientWidth","scrollRight","canScrollRight","canScrollLeft","$apply","availableBySegments","availableByPassengerSegments","checkAllChoose","j","passenger","flight","mealsIssued","getMealsIssuedLength","mealsSelected","getMealsSelectedLength","total","groupedEditableExtraServices","meal","groupedIssuedExtraServices","getMealInfo","obj","infoMeal","group","splitMeal","selectedMeal","map","selectedMealPassenger","selectedMealPassengerSegment","newMealList","selectedMealItem","tmpItem","copy","totalPrice","Big","div","toFixed","find","hasAlias","getAvailablePassengersCount","getParam","mealImagesPath","addOrderInfoListener","on","6","SeatRossiyaController","$timeout","modifyError","clearFlightPassenger","editable_extra_services","resp","error","seatMap","setSeatMapContainerTopPosition","reset","seatMapContainerTopPosition","jQuery","css","updateSeatMap","loadingSeatMap","seatMapError","hasSeatsWithBabyBassinet","checkExistSeatsWithBabyBassinetBySeatMap","babyBassinetCost","getBabyBassinetCost","paxNum","babyBassinetItem","babyBassinetService","getFirstNotEmptySubListItem","price","currency","value","hasBabyBassinet","decks","deck","cabins","cabin","rows","row","chairs","chair","checkExistSeatsWithBabyBassinetByChair","properties","prop","setPassengerFlightSeat","cabinAllowed","rowNumber","paxId","segId","available","number","commonSubgroup","removeBabyBassinetIfExist","updateSunInfoByFlights","sunInfoByFlights","sunInfo","origincity","departuredate","departuretime","destinationcity","arrivaldate","arrivaltime","getAvailablePassengersCountWrap","count","filter","pax","hasSeats","removePassengerFlightSeat","editableExtraServicesHeap","groupCode","mainSegmentId","passengerId","passengerSegmentSeat","7","InsuranceFaresController","getInsuranceFullPrice","insurance_premium","plus","luggage_premium","switch","8","InsuranceFaresSwitchAllController","switchState","9","OrderController","$window","redirect","fancyboxTools","retryPayment","removeInsuranceAeroexpress","loading","retryRegister","pnr","lastName","location","eraseAeroexpressBecauseOfCurrency","eraseInsuranceBecauseOfCurrency","openHandler","mode","submitCallback","errorMessage","bindOrder","header","regnum","bindAlowed","showBindOrderSuccessMessage","showBindOrderFailMessage","checkAllPassengersHavePaidService","name","allExtraServicesByPassengers","segmentServices","segmentWantedService","status","clearSession","goToSearchOrder","choosePayMethodFailMsg","openExchange","goToExchange","openRefund","goToRefund","openAddServices","goToAddServices","suffixCount","$on","event","data","popupChoosePayMethodPending","$onInit","resultParam","getParamFromLocation","waitPayment","hasFailedServices","paymentRedirectTo","showPaymentFrame","ignoreFailedServices","disableOutsideCloseClick","hasBonusCard","ffpSumm","ffpBonus","hasVKO","some","originport","10","PopupMealRossiyaController","setItemIndex","mealIndex","detailedView","open","closeItemPopup","nextItemPopup","prevItemPopup","setAvailablePassengers","availablePassengers","index","currentFlightIndex","mealMenuSubgroupMobileChange","mealMenuSubgroupMobile","switchNext","successSwitch","currentPassengerIndex","switchPrev","arrayString","arrays","Array","isArray","reduce","flat","current","concat","getGroupMeal","totalAmount","totalSumm","alreadySelectedPrice","close","fancybox","subgroupItems","createOptionsForUiSelect","clearPassengerFlightMeal","getPassengerFlightMeal","mealSelect","issuedMeal","11","run","$rootScope","hasSomeTrueInArray","list","12","./components/baby-bassinet-icon-legend/baby-bassinet-icon-legend","./components/baby-bassinet-icon-tooltip/baby-bassinet-icon-tooltip","./components/baby-bassinet-icon/baby-bassinet-icon","./components/es-insurance-rossiya/es-insurance-rossiya","./components/es-meal-rossiya/es-meal-rossiya","./components/es-seat-rossiya/es-seat-rossiya","./components/insurance-fares-rossiya/insurance-fares-rossiya","./components/insurance-fares-switch-all/insurance-fares-switch-all","./components/order-rossiya/order-rossiya","./components/popup-meal-rossiya/popup-meal-rossiya","./hasSomeTrueInArray"],"mappings":"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","file":"controllers-rossia.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n\"use strict\";\nangular.module('app').component('babyBassinetIconLegend', {\n    templateUrl: 'components/baby-bassinet-icon-legend/baby-bassinet-icon-legend.html'\n});\n\n},{}],2:[function(require,module,exports){\n\"use strict\";\nangular.module('app').component('babyBassinetIconTooltip', {\n    templateUrl: 'components/baby-bassinet-icon-tooltip/baby-bassinet-icon-tooltip.html'\n});\n\n},{}],3:[function(require,module,exports){\n\"use strict\";\nangular.module('app').component('babyBassinetIcon', {\n    templateUrl: 'components/baby-bassinet-icon/baby-bassinet-icon.html',\n    controller: function () {},\n    controllerAs: 'vm',\n    bindings: {\n        rfisc: '=rfisc',\n        active: '=active',\n        disabled: '=disabled'\n    }\n});\n\n\n\n},{}],4:[function(require,module,exports){\n\"use strict\";\nangular.module('wes').component('esInsuranceRossiya', {\n    templateUrl: 'components/es-insurance-rossiya/es-insurance-rossiya.html',\n    controller: ['backend', '$scope', InsuranceController],\n    controllerAs: 'vm',\n    bindings: {\n        service: '=service',\n        locked: '=locked'\n    }\n});\n\nfunction InsuranceController(backend, $scope) {\n\n    var vm = this;\n\n    vm.switchService = switchService;\n    vm.switchServiceItem = switchServiceItem;\n\n    vm.orderInfo = backend.getOrderInfo();\n\n    $scope.$watch('vm.service', function () {\n        vm.isAllPassengersActive = vm.service.itemsByPassengers.every(function (paxServices) {\n            return !!_.findWhere(paxServices, { selected: true });\n        });\n    });\n\n    function switchService() {\n        if (!vm.locked) {\n            vm.service.active = !vm.service.active;\n            if (vm.service.active) {\n                if (vm.service.items.length === 1) {\n                    backend.modifyExtraService(getInsuranceSubmitParams(vm.service.items[0]));\n                }\n            } else {\n                backend.removeExtraService({\n                    code: vm.service.onlineMode ? 'insuranceOnline' : 'insurance'\n                });\n            }\n        }\n    }\n\n    function switchServiceItem(itemNum, paxKey) {\n        if (!vm.locked) {\n            if (paxKey === 'common') {\n                backend[\n                    vm.service.items[itemNum].selected ?\n                    'modifyExtraService' :\n                    'removeExtraService'\n                ](getInsuranceSubmitParams(vm.service.items[itemNum]));\n            } else {\n                backend[\n                    vm.service.itemsByPassengers[paxKey][itemNum].selected ?\n                    'modifyExtraService' :\n                    'removeExtraService'\n                ](\n                    getInsuranceSubmitParams(\n                        vm.service.itemsByPassengers[paxKey][itemNum],\n                        vm.orderInfo.passengers[paxKey].id\n                    )\n                );\n            }\n        }\n    }\n\n    function getInsuranceSubmitParams(item, passenger_id) {\n        var params = {\n            code: 'insurance',\n            ins: item.ins,\n            tins: item.tins\n        };\n        if (passenger_id) {\n            params.passenger_id = passenger_id;\n        }\n        if (vm.service.onlineMode) {\n            params.code = 'insuranceOnline';\n            params.productCode = item.productCode;\n        }\n        return params;\n    }\n\n}\n\n},{}],5:[function(require,module,exports){\n\"use strict\";\nangular.module('app').component('esMealRossiya', {\n    templateUrl: 'components/es-meal-rossiya/es-meal-rossiya.html',\n    controller: ['$scope', '$element','backend', 'utils', MealRossiyaController],\n    controllerAs: 'vm',\n    bindings: {\n        service: '=service',\n        locked: '=locked'\n    }\n});\n\nfunction MealRossiyaController($scope, $element, backend, utils) {\n\n    var vm = this,\n        passengersTableContainer = $element.find('div.passengersTableContainer');\n\n    vm.switchService = switchService;\n    vm.selectFlightPassenger = selectFlightPassenger;\n    vm.selectFirstAvailablePassengerFlight = selectFirstAvailablePassengerFlight;\n    vm.setPassengerFlightMeal = setPassengerFlightMeal;\n    vm.removePassengerFlightMeal = removePassengerFlightMeal;\n    vm.getSelectedPassengerFlightMeal = getSelectedPassengerFlightMeal;\n    vm.scrollToStart = scrollToStart;\n    vm.scrollToEnd = scrollToEnd;\n    vm.checkAllChoose = checkAllChoose;\n    vm.mealCountChangeHandler = mealCountChangeHandler;\n    vm.hasAlias = backend.hasAlias;\n    vm.getAvailablePassengersCount = utils.getAvailablePassengersCount;\n    vm.checkServiceRemovalProhibited = backend.checkServiceRemovalProhibited;\n    vm.getLimitStatus = getLimitStatus;\n    vm.getMealInfo = getMealInfo;\n\n    vm.canScrollRight = true;\n    vm.canScrollLeft = false;\n\n    vm.selectedFlight = 0;\n    vm.selectedPassenger = 0;\n\n    if (backend.getParam('site.externalStorageBaseUrl')) {\n        vm.mealImagesPath = backend.getParam('site.externalStorageBaseUrl') + '/img/content/meal';\n    } else {\n        vm.mealImagesPath = './themes/websky/assets/static/img/content/meal';\n    }\n\n    backend.addOrderInfoListener(function (orderInfo) {\n        if (\n            orderInfo &&\n            orderInfo.groupedEditableExtraServices &&\n            orderInfo.groupedEditableExtraServices.meal\n        ) {\n            orderInfo.groupedEditableExtraServices.meal = splitMeal(orderInfo.groupedEditableExtraServices.meal);\n        }\n\n        vm.orderInfo = orderInfo;\n    }, false, true);\n\n    $scope.$watch('vm.service', function () {\n        if (vm.mealMenu) {\n            updateMealMenu();\n        }\n    });\n\n    passengersTableContainer.on('scroll', mobileTableScrollHandler);\n\n    if (vm.service.active) {\n        updateMealMenu();\n    }\n\n    function switchService() {\n        if (!vm.locked && !backend.checkServiceRemovalProhibited('meal')) {\n            vm.service.active = !vm.service.active;\n            if (vm.service.active) {\n                selectFirstAvailablePassengerFlight();\n            } else {\n                backend.removeExtraService({\n                    code: 'meal'\n                });\n            }\n        }\n    }\n\n    function mealCountChangeHandler(subgroupNum, mealItem, delta) {\n\n      if(delta < 0) {\n        if (!vm.locked) {\n            backend.modifyExtraService({\n                code: 'meal',\n                passenger_id: vm.orderInfo.passengers[vm.selectedPassenger].id,\n                segment_id: vm.orderInfo.plainFlights[vm.selectedFlight].id,\n                subgroup: vm.service.subgroups[subgroupNum],\n                amount: (mealItem.alreadySelectedCount || 0) + delta,\n                service_type: mealItem.serviceType,\n                rfisc: mealItem.rfisc\n            });\n        }\n      }\n\n      // if countSumm for all meal > limit, don't plus\n      if( !getLimitStatus(vm.selectedPassenger, vm.selectedFlight) && delta > 0) {\n        if (!vm.locked) {\n            backend.modifyExtraService({\n                code: 'meal',\n                passenger_id: vm.orderInfo.passengers[vm.selectedPassenger].id,\n                segment_id: vm.orderInfo.plainFlights[vm.selectedFlight].id,\n                subgroup: vm.service.subgroups[subgroupNum],\n                amount: (mealItem.alreadySelectedCount || 0) + delta,\n                service_type: mealItem.serviceType,\n                rfisc: mealItem.rfisc\n            });\n        }\n      }\n\n    }\n\n    function selectFlightPassenger(flightNum, passengerNum) {\n        vm.selectedFlight = flightNum;\n        vm.selectedPassenger = passengerNum;\n        updateMealMenu();\n    }\n\n    function selectFirstAvailablePassengerFlight() {\n        vm.selectedFlight = getFirstAvailableFlightNum();\n        vm.selectedPassenger = getFirstAvailablePassengerNum(vm.selectedFlight);\n        updateMealMenu();\n    }\n\n    function updateMealMenu() {\n        vm.mealMenu = flattenMealMenu(vm.service.itemsByPassengerSegments[vm.selectedPassenger][vm.selectedFlight]);\n        if (vm.mealMenuSubgroup === undefined) {\n            vm.mealMenuSubgroup = false;\n        }\n    }\n\n    function flattenMealMenu(deepMenu) {\n        var flatMenu = [];\n        if (deepMenu && deepMenu.length) {\n            deepMenu.forEach(function (deepMenuItems, subgroupNum) {\n                if (deepMenuItems && deepMenuItems.length) {\n                    deepMenuItems.forEach(function (deepMenuItem) {\n                        deepMenuItem.subgroupNum = subgroupNum;\n                        flatMenu.push(deepMenuItem);\n                    });\n                }\n            });\n        }\n        return flatMenu;\n    }\n\n    function setPassengerFlightMeal(subgroupNum, mealItem) {\n        var selectedPassengerFlightMeal = getSelectedPassengerFlightMeal(vm.selectedPassenger, vm.selectedFlight),\n            newMealParams = {\n                code: 'meal',\n                passenger_id: vm.orderInfo.passengers[vm.selectedPassenger].id,\n                segment_id: vm.orderInfo.plainFlights[vm.selectedFlight].id,\n                subgroup: vm.service.subgroups[subgroupNum],\n                service_type: mealItem.serviceType,\n                rfisc: mealItem.rfisc\n            };\n        if (!vm.locked) {\n            if (\n                selectedPassengerFlightMeal &&\n                !backend.checkServiceRemovalProhibited('meal', vm.selectedPassenger, vm.selectedFlight)\n            ) {\n                backend.removeExtraService({\n                    code: 'meal',\n                    passenger_id: vm.orderInfo.passengers[vm.selectedPassenger].id,\n                    segment_id: vm.orderInfo.plainFlights[vm.selectedFlight].id,\n                    service_type: selectedPassengerFlightMeal.serviceType,\n                    rfisc: selectedPassengerFlightMeal.rfisc\n                }, true).then(function () {\n                    backend.modifyExtraService(newMealParams);\n                });\n            } else {\n                backend.modifyExtraService(newMealParams);\n            }\n        }\n    }\n\n    function removePassengerFlightMeal(passengerNum, flightNum) {\n        if (!vm.locked && !backend.checkServiceRemovalProhibited('meal', passengerNum, flightNum)) {\n            backend.removeExtraService({\n                code: 'meal',\n                passenger_id: vm.orderInfo.passengers[passengerNum].id,\n                segment_id: vm.orderInfo.plainFlights[flightNum].id\n            });\n        }\n    }\n\n    function getSelectedPassengerFlightMeal(passengerNum, flightNum) {\n        var result,\n            passengerSegmentServices,\n            passengerSegmentMeal;\n        if (vm.orderInfo.editableExtraServicesByPassengers) {\n            if (vm.orderInfo.editableExtraServicesByPassengers[passengerNum]) {\n                /* jshint maxlen: 150 */\n                passengerSegmentServices = vm.orderInfo.editableExtraServicesByPassengers[passengerNum].passengerSegmentServices[flightNum];\n                if (passengerSegmentServices) {\n                    passengerSegmentMeal = _.findWhere(passengerSegmentServices, { code: 'meal' });\n                    if (passengerSegmentMeal) {\n                        result = passengerSegmentMeal.serviceItem;\n                    }\n                }\n            }\n        }\n        return result;\n    }\n\n    function scrollToStart() {\n        passengersTableContainer.scrollTo(0);\n    }\n\n    function scrollToEnd() {\n        passengersTableContainer.scrollTo(passengersTableContainer[0].scrollWidth);\n    }\n\n    function mobileTableScrollHandler() {\n        var scrollLeft = passengersTableContainer[0].scrollLeft,\n            scrollWidth = passengersTableContainer[0].scrollWidth,\n            clientWidth = passengersTableContainer[0].clientWidth,\n            scrollRight = scrollWidth - clientWidth - scrollLeft;\n        vm.canScrollRight = (scrollRight !== 0);\n        vm.canScrollLeft = (scrollLeft !== 0);\n        $scope.$apply();\n    }\n\n    function getFirstAvailableFlightNum() {\n        var i;\n        for (i = 0; i < vm.orderInfo.plainFlights.length; i++) {\n            if (vm.service.availableBySegments[i]) {\n                return i;\n            }\n        }\n        return -1;\n    }\n\n    function getFirstAvailablePassengerNum(flightNum) {\n        var i;\n        if (vm.service.availableByPassengerSegments) {\n            for (i = 0; i < vm.orderInfo.passengers.length; i++) {\n                if (vm.service.availableByPassengerSegments[i][flightNum]) {\n                    return i;\n                }\n            }\n        }\n        return -1;\n    }\n\n    function checkAllChoose() {\n\n      for (var i = 0; i < vm.orderInfo.plainFlights.length; i++) {\n        for (var j = 0; j < vm.orderInfo.passengers.length; j++) {\n          if (getSelectedPassengerFlightMeal(j, i)) {\n            return true;\n          }\n        }\n      }\n\n      return false;\n\n    }\n\n    /* Общее кол-во блюд */\n    function getLimitStatus (passenger, flight) {\n      var mealsIssued = getMealsIssuedLength(passenger, flight),\n          mealsSelected = getMealsSelectedLength(passenger, flight),\n          total = mealsIssued + mealsSelected;\n\n          return total > 2;\n    }\n\n    /* Кол-во выбранных блюд */\n    function getMealsSelectedLength(selectedPassenger, selectedFlight) {\n      var total = 0;\n      if (\n          vm.orderInfo.groupedEditableExtraServices &&\n          vm.orderInfo.groupedEditableExtraServices.meal &&\n          vm.orderInfo.groupedEditableExtraServices.meal[selectedPassenger] &&\n          vm.orderInfo.groupedEditableExtraServices.meal[selectedPassenger][selectedFlight] &&\n          vm.orderInfo.groupedEditableExtraServices.meal[selectedPassenger][selectedFlight].length\n      ) {\n        total = vm.orderInfo.groupedEditableExtraServices.meal[selectedPassenger][selectedFlight].length;\n        return total;\n      }\n      return 0;\n    }\n\n    /* Кол-во окупленных блюд */\n    function getMealsIssuedLength(selectedPassenger, selectedFlight) {\n      var total = 0;\n        if (\n            vm.orderInfo.groupedIssuedExtraServices &&\n            vm.orderInfo.groupedIssuedExtraServices.meal &&\n            vm.orderInfo.groupedIssuedExtraServices.meal[selectedPassenger] &&\n            vm.orderInfo.groupedIssuedExtraServices.meal[selectedPassenger][selectedFlight] &&\n            vm.orderInfo.groupedIssuedExtraServices.meal[selectedPassenger][selectedFlight].length\n        ) {\n          for(var i = 0; i < vm.orderInfo.groupedIssuedExtraServices.meal[selectedPassenger][selectedFlight].length; i++ ) {\n            total += vm.orderInfo.groupedIssuedExtraServices.meal[selectedPassenger][selectedFlight][i].amount;\n          }\n        }\n        return total;\n    }\n\n    function getMealInfo(obj) {\n      var infoMeal = {\n        group: 0,\n        meal: {}\n      }\n\n      for (var i = 0; i < vm.mealMenu.length; i++) {\n        if(vm.mealMenu[i].rfisc == obj.rfisc) {\n          infoMeal.meal = vm.mealMenu[i];\n          infoMeal.group = vm.mealMenu[i].subgroupNum;\n        }\n      }\n\n      return infoMeal;\n    }\n\n    function splitMeal(selectedMeal) {\n        if (selectedMeal && selectedMeal.length) {\n            selectedMeal = selectedMeal.map(function (selectedMealPassenger) {\n                if (selectedMealPassenger && selectedMealPassenger.length) {\n                    selectedMealPassenger = selectedMealPassenger.map(function (selectedMealPassengerSegment) {\n                        var newMealList = [];\n                        if (selectedMealPassengerSegment && selectedMealPassengerSegment.length) {\n                            selectedMealPassengerSegment.forEach(function (selectedMealItem) {\n                                var tmpItem;\n                                if (selectedMealItem && selectedMealItem.amount) {\n                                    tmpItem = angular.copy(selectedMealItem);\n                                    tmpItem.amount = 1;\n                                    tmpItem.totalPrice = Big(selectedMealItem.totalPrice).div(selectedMealItem.amount).toFixed(2);\n                                    for (var i=0; i<selectedMealItem.amount; i++) {\n                                        newMealList.push(tmpItem);\n                                    }\n                                }\n                            });\n                            selectedMealPassengerSegment = newMealList;\n                        }\n                        return selectedMealPassengerSegment;\n                    });\n                }\n                return selectedMealPassenger;\n            });\n        }\n        return selectedMeal;\n    }\n\n}\n\n},{}],6:[function(require,module,exports){\n\"use strict\";\nangular.module('app').component('esSeatRossiya', {\n    templateUrl: 'components/es-seat-rossiya/es-seat-rossiya.html',\n    controller: ['$scope', '$element', '$timeout', 'backend', 'utils', SeatRossiyaController],\n    controllerAs: 'vm',\n    bindings: {\n        service: '=service',\n        babyBassinetService: '=',\n        locked: '=locked'\n    }\n});\n\nfunction SeatRossiyaController($scope, $element, $timeout, backend, utils) {\n\n    var vm = this,\n        passengersTableContainer = $element.find('div.passengersTableContainer'),\n        seatMapContainerTopPosition = '0px';\n\n    vm.switchService = switchService;\n\n    vm.selectFlightPassenger = selectFlightPassenger;\n    vm.selectFirstAvailablePassengerFlight = selectFirstAvailablePassengerFlight;\n    vm.setPassengerFlightSeat = setPassengerFlightSeat;\n    vm.getSelectedPassengerFlightMeal = getSelectedPassengerFlightMeal;\n    vm.checkAllChoose = checkAllChoose;\n\n    vm.hasAlias = backend.hasAlias;\n\n    vm.scrollToStart = scrollToStart;\n    vm.scrollToEnd = scrollToEnd;\n\n    vm.getAvailablePassengersCount = utils.getAvailablePassengersCount;\n    vm.getAvailablePassengersCountWrap = getAvailablePassengersCountWrap;\n\n    vm.removePassengerFlightSeat = removePassengerFlightSeat;\n\n    vm.checkServiceRemovalProhibited = backend.checkServiceRemovalProhibited;\n\n    vm.canScrollRight = true;\n    vm.canScrollLeft = false;\n\n    backend.addOrderInfoListener(function (orderInfo) {\n        vm.orderInfo = orderInfo;\n    }, false, true);\n\n    updateSunInfoByFlights();\n\n    passengersTableContainer.on('scroll', mobileTableScrollHandler);\n\n    if (vm.service.active) {\n        selectFirstAvailablePassengerFlight();\n    }\n\n    function switchService() {\n        if (!vm.locked && !backend.checkServiceRemovalProhibited('seat')) {\n            vm.service.active = !vm.service.active;\n            if (vm.service.active) {\n                selectFirstAvailablePassengerFlight();\n            } else {\n                vm.modifyError = false;\n                backend.removeExtraService({\n                    code: 'seat'\n                }).then(function () {\n                    clearFlightPassenger();\n                    if (\n                        vm.orderInfo.editable_extra_services &&\n                        _.findWhere(vm.orderInfo.editable_extra_services, { code: 'babyBassinet' })\n                    ) {\n                        backend.removeExtraService({\n                            code: 'babyBassinet'\n                        })\n                    }\n                }, function (resp) {\n                    if (resp.error) {\n                        vm.modifyError = resp.error;\n                    }\n                });\n            }\n        }\n    }\n\n    function clearFlightPassenger() {\n        vm.seatMap = false;\n        vm.selectedFlight = -1;\n        vm.selectedPassenger = -1;\n    }\n\n    function setSeatMapContainerTopPosition(reset) {\n        if (reset) {\n            seatMapContainerTopPosition = '0px';\n        } else {\n            seatMapContainerTopPosition = jQuery('.passengersSeatMap').find('.mCSB_container').css('top');\n        }\n    }\n\n    function selectFlightPassenger(flightNum, passengerNum) {\n        // Нужно запомнить положение карты мест для переключения между пассажирами одного сегмента\n        setSeatMapContainerTopPosition(vm.selectedFlight !== flightNum);\n        vm.selectedFlight = flightNum;\n        vm.selectedPassenger = passengerNum;\n        updateSeatMap();\n    }\n\n    function selectFirstAvailablePassengerFlight() {\n        vm.selectedFlight = getFirstAvailableFlightNum();\n        vm.selectedPassenger = getFirstAvailablePassengerNum(vm.selectedFlight);\n        updateSeatMap();\n    }\n\n    function updateSeatMap() {\n\n        if (vm.selectedPassenger !== -1 && vm.selectedFlight !== -1) {\n            vm.loadingSeatMap = true;\n            vm.seatMapError = false;\n            backend.seatMap(\n                vm.orderInfo.passengers[vm.selectedPassenger].id,\n                vm.orderInfo.plainFlights[vm.selectedFlight].id\n            ).then(function (resp) {\n                vm.seatMap = resp;\n                vm.seatMap.hasSeatsWithBabyBassinet = checkExistSeatsWithBabyBassinetBySeatMap(resp);\n                if (vm.seatMap.hasSeatsWithBabyBassinet) {\n                    vm.seatMap.babyBassinetCost = getBabyBassinetCost();\n                }\n                vm.loadingSeatMap = false;\n\n                $timeout(function () {\n                    jQuery('.passengersSeatMap').find('.mCSB_container').css('top', seatMapContainerTopPosition);\n                });\n            }, function (resp) {\n                vm.seatMapError = resp.error;\n                vm.loadingSeatMap = false;\n            });\n        }\n\n    }\n\n    function getBabyBassinetCost(paxNum, flightNum) {\n        var babyBassinetItem;\n        if (\n            vm.babyBassinetService &&\n            vm.babyBassinetService.itemsByPassengerSegments &&\n            vm.babyBassinetService.itemsByPassengerSegments[vm.selectedPassenger] &&\n            vm.babyBassinetService.itemsByPassengerSegments[vm.selectedPassenger][vm.selectedFlight]\n        ) {\n            babyBassinetItem = utils.getFirstNotEmptySubListItem(vm.babyBassinetService.itemsByPassengerSegments[vm.selectedPassenger][vm.selectedFlight]);\n            if (\n                babyBassinetItem &&\n                babyBassinetItem.price &&\n                babyBassinetItem.currency\n            ) {\n                return {\n                    value: babyBassinetItem.price,\n                    currency: babyBassinetItem.currency\n                }\n            }\n        }\n    }\n\n    function checkExistSeatsWithBabyBassinetBySeatMap(seatMap) {\n        var hasBabyBassinet = false;\n        if (seatMap && seatMap.decks) {\n            seatMap.decks.forEach(function (deck) {\n                if (deck && deck.cabins) {\n                    deck.cabins.forEach(function (cabin) {\n                        if (cabin && cabin.rows) {\n                            cabin.rows.forEach(function (row) {\n                                if (row && row.chairs) {\n                                    row.chairs.forEach(function (chair) {\n                                        if (checkExistSeatsWithBabyBassinetByChair(chair)) {\n                                            hasBabyBassinet = true;\n                                        }\n                                    });\n                                }\n                            });\n                        }\n                    });\n                }\n            });\n        }\n        return hasBabyBassinet;\n    }\n\n    function checkExistSeatsWithBabyBassinetByChair(chair) {\n        var hasBabyBassinet = false;\n        if (chair && chair.properties) {\n            chair.properties.forEach(function (prop) {\n                if (prop === 'babyBassinet') {\n                    hasBabyBassinet = true\n                    chair.hasBabyBassinet = true\n                }\n            });\n        }\n        return hasBabyBassinet;\n    }\n\n    function setPassengerFlightSeat(chair, cabinAllowed, rowNumber) {\n        var babyBassinetItem,\n            paxId = vm.orderInfo.passengers[vm.selectedPassenger].id,\n            segId = vm.orderInfo.plainFlights[vm.selectedFlight].id;\n        if (!vm.locked) {\n            if (chair.available && cabinAllowed) {\n                //setSeatMapContainerTopPosition();\n\n                seatMapContainerTopPosition = jQuery('.passengersSeatMap').find('.mCSB_container').css('top');\n\n                vm.modifyError = false;\n\n                backend.modifyExtraService({\n                    code: 'seat',\n                    passenger_id: paxId,\n                    segment_id: segId,\n                    value: rowNumber + chair.number,\n                    subgroup: vm.service.commonSubgroup,\n                    rfisc: chair.rfisc || '',\n                    service_type: 'F'\n                }).then(function () {\n                    updateSeatMap();\n\n                    if (checkExistSeatsWithBabyBassinetByChair(chair)) {\n                        if (\n                            vm.babyBassinetService &&\n                            vm.babyBassinetService.itemsByPassengerSegments &&\n                            vm.babyBassinetService.itemsByPassengerSegments[vm.selectedPassenger] &&\n                            vm.babyBassinetService.itemsByPassengerSegments[vm.selectedPassenger][vm.selectedFlight]\n                        ) {\n                            babyBassinetItem = utils.getFirstNotEmptySubListItem(vm.babyBassinetService.itemsByPassengerSegments[vm.selectedPassenger][vm.selectedFlight]);\n                            if (\n                                babyBassinetItem &&\n                                babyBassinetItem.serviceType &&\n                                babyBassinetItem.rfisc\n                            ) {\n                                backend.modifyExtraService({\n                                    code: 'babyBassinet',\n                                    passenger_id: paxId,\n                                    segment_id: segId,\n                                    subgroup: vm.babyBassinetService.commonSubgroup,\n                                    rfisc: babyBassinetItem.rfisc,\n                                    service_type: babyBassinetItem.serviceType\n                                })\n                            }\n                        }\n                    } else {\n                        removeBabyBassinetIfExist(paxId, segId);\n                    }\n                }, function (resp) {\n                    if (resp.error) {\n                        vm.modifyError = resp.error;\n                    }\n                });\n            }\n        }\n    }\n\n    function updateSunInfoByFlights() {\n        vm.sunInfoByFlights = [];\n        vm.orderInfo.plainFlights.forEach(function (flight, flightNum) {\n            backend.sunInfo(\n                flight.origincity,\n                flight.departuredate,\n                flight.departuretime,\n                flight.destinationcity,\n                flight.arrivaldate,\n                flight.arrivaltime\n            ).then(function (resp) {\n                vm.sunInfoByFlights[flightNum] = resp;\n            });\n        });\n    }\n\n    function getFirstAvailableFlightNum() {\n        var i;\n        for (i = 0; i < vm.orderInfo.plainFlights.length; i++) {\n            if (vm.service.availableBySegments[i]) {\n                return i;\n            }\n        }\n        return -1;\n    }\n\n    function getFirstAvailablePassengerNum(flightNum) {\n        var i;\n        if (vm.service.availableByPassengerSegments) {\n            for (i = 0; i < vm.orderInfo.passengers.length; i++) {\n                if (vm.service.availableByPassengerSegments[i][flightNum]) {\n                    return i;\n                }\n            }\n        }\n        return -1;\n    }\n\n    function scrollToStart() {\n        passengersTableContainer.scrollTo(0);\n    }\n\n    function scrollToEnd() {\n        passengersTableContainer.scrollTo(passengersTableContainer[0].scrollWidth);\n    }\n\n    function mobileTableScrollHandler() {\n        var scrollLeft = passengersTableContainer[0].scrollLeft,\n            scrollWidth = passengersTableContainer[0].scrollWidth,\n            clientWidth = passengersTableContainer[0].clientWidth,\n            scrollRight = scrollWidth - clientWidth - scrollLeft;\n        vm.canScrollRight = (scrollRight !== 0);\n        vm.canScrollLeft = (scrollLeft !== 0);\n        $scope.$apply();\n    }\n\n    function getAvailablePassengersCountWrap(availableByPassengerSegments) {\n        var count = utils.getAvailablePassengersCount(availableByPassengerSegments);\n        return count + vm.orderInfo.passengers.filter(function (pax) {\n            return !pax.hasSeats;\n        }).length;\n    }\n\n    function removePassengerFlightSeat(passengerNum, flightNum) {\n        var paxId = vm.orderInfo.passengers[passengerNum].id,\n            segId = vm.orderInfo.plainFlights[flightNum].id;\n        if (\n            !vm.locked && !backend.checkServiceRemovalProhibited('seat', passengerNum, flightNum)\n        ) {\n            vm.modifyError = false;\n\n            backend.removeExtraService({\n                code: 'seat',\n                passenger_id: paxId,\n                segment_id: segId\n            }).then(function () {\n                removeBabyBassinetIfExist(paxId, segId);\n                if (vm.selectedFlight === flightNum) {\n                    updateSeatMap();\n                }\n            }, function (resp) {\n                if (resp.error) {\n                    vm.modifyError = resp.error;\n                }\n            });\n\n\n        }\n    }\n\n    function removeBabyBassinetIfExist(paxId, segId) {\n        if (\n            vm.orderInfo.editableExtraServicesHeap &&\n            _.findWhere(\n                vm.orderInfo.editableExtraServicesHeap,\n                {\n                    groupCode: 'babyBassinet',\n                    mainSegmentId: segId,\n                    passengerId: paxId\n                }\n            )\n        ) {\n            backend.removeExtraService({\n                code: 'babyBassinet',\n                passenger_id: paxId,\n                segment_id: segId\n            })\n        }\n    }\n\n    function getSelectedPassengerFlightMeal(passengerNum, flightNum) {\n        var result,\n            passengerSegmentServices,\n            passengerSegmentSeat;\n        if (vm.orderInfo.editableExtraServicesByPassengers) {\n            if (vm.orderInfo.editableExtraServicesByPassengers[passengerNum]) {\n                /* jshint maxlen: 150 */\n                passengerSegmentServices = vm.orderInfo.editableExtraServicesByPassengers[passengerNum].passengerSegmentServices[flightNum];\n                if (passengerSegmentServices) {\n                    passengerSegmentSeat = _.findWhere(passengerSegmentServices, { code: 'seat' });\n                    if (passengerSegmentSeat) {\n                        result = passengerSegmentSeat.serviceItem;\n                    }\n                }\n            }\n        }\n        return result;\n    }\n\n    function checkAllChoose() {\n\n      for (var i = 0; i < vm.orderInfo.plainFlights.length; i++) {\n        for (var j = 0; j < vm.orderInfo.passengers.length; j++) {\n          if (getSelectedPassengerFlightMeal(j, i)) {\n            return true\n          }\n        }\n      }\n\n      return false;\n\n    }\n\n}\n\n},{}],7:[function(require,module,exports){\n\"use strict\";\nangular.module('wes').component('insuranceFaresRossiya', {\n    templateUrl: 'components/insurance-fares-rossiya/insurance-fares-rossiya.html',\n    controller: [InsuranceFaresController],\n    controllerAs: 'vm',\n    bindings: {\n        items: '=',\n        paxKey: '=',\n        pax: '=',\n        switch: '='\n    }\n});\n\nfunction InsuranceFaresController() {\n\n    var vm = this;\n\n    vm.getInsuranceFullPrice = getInsuranceFullPrice;\n\n    function getInsuranceFullPrice(item) {\n        return {\n            value: item.price || Big(item.insurance_premium || 0).plus(item.luggage_premium || 0).toFixed(2),\n            currency: item.currency\n        };\n    }\n\n}\n\n},{}],8:[function(require,module,exports){\n\"use strict\";\nangular.module('wes').component('insuranceFaresSwitchAll', {\n    templateUrl: 'components/insurance-fares-switch-all/insurance-fares-switch-all.html',\n    controller: ['backend', InsuranceFaresSwitchAllController],\n    controllerAs: 'vm',\n    bindings: {\n        active: '<',\n        item: '<'\n    }\n});\n\nfunction InsuranceFaresSwitchAllController(backend) {\n\n    var vm = this;\n\n    vm.switch = switchState;\n\n    function switchState() {\n\n        if (vm.active) {\n            backend.modifyExtraService({\n                code: 'insuranceOnline',\n                ins: vm.item.ins,\n                tins: vm.item.tins,\n                productCode: vm.item.productCode\n            });\n        } else {\n            backend.removeExtraService({\n                code: 'insuranceOnline'\n            });\n        }\n\n    }\n\n}\n\n},{}],9:[function(require,module,exports){\n\"use strict\";\n\nangular.module('app').component('orderRossiya', {\n    templateUrl: 'components/order-rossiya/order-rossiya.html',\n    controller: ['$scope', '$window', '$timeout', 'backend', 'utils', 'redirect', 'fancyboxTools', OrderController],\n    controllerAs: 'vm',\n    bindings: {\n        orderInfo: '='\n    }\n});\n\nfunction OrderController($scope, $window, $timeout, backend, utils, redirect, fancyboxTools) {\n\n    var vm = this;\n    vm.loading = true;\n    vm.errorMessage = false;\n    vm.choosePayMethodFailMsg = false;\n    vm.openExchange = redirect.goToExchange;\n    vm.openRefund = redirect.goToRefund;\n    vm.openAddServices = redirect.goToAddServices;\n    vm.suffixCount = utils.suffixCount;\n    vm.retryPayment = retryPayment;\n    vm.bindOrder = bindOrder;\n    vm.checkAllPassengersHavePaidService = checkAllPassengersHavePaidService;\n    vm.clearSession = clearSession;\n\n    $scope.$on('popupChoosePayMethodChoosePayMethodFailMsg', function (event, data) {\n        vm.choosePayMethodFailMsg = data;\n    });\n\n    $scope.$on('popupChoosePayMethodPending', function (event, data) {\n        vm.popupChoosePayMethodPending = data;\n    });\n\n    vm.$onInit = function () {\n        var resultParam = utils.getParamFromLocation('result');\n\n        if (resultParam === 'success') {\n            if (\n                vm.orderInfo.header &&\n                (\n                    vm.orderInfo.header.status === 'being_paid' ||\n                    vm.orderInfo.header.status === 'being_paid_for_exchange'\n                )\n            ) {\n                backend.waitPayment(vm.orderInfo.header.regnum, vm.orderInfo.header.lastName).then(function () {\n                    $window.location = (\n                        './order?pnr=' + vm.orderInfo.header.regnum + '&lastName=' + vm.orderInfo.header.lastName + '&result=success'\n                    );\n                    return;\n                }, function () {\n                    vm.loading = false;\n                });\n            } else {\n                vm.loading = false;\n            }\n        } else {\n            // Платежный фрэйм открывается независимо от статуса заказа\n            // Необходимое условие для оплаты онлайн страховок\n            if (!vm.orderInfo.hasFailedServices && vm.orderInfo.paymentRedirectTo) {\n                vm.showPaymentFrame = true;\n            }\n            vm.loading = false;\n        }\n\n        if (\n            vm.orderInfo.hasFailedServices &&\n            !resultParam &&\n            vm.orderInfo.header &&\n            (\n                vm.orderInfo.header.status === 'being_paid' ||\n                vm.orderInfo.header.status === 'booked'\n            )\n        ) {\n            $timeout(function () {\n                fancyboxTools.openHandler('popupRemovedServicesWarningByOrder', false, {\n                    submitCallback: function () {\n                        if (vm.orderInfo.paymentRedirectTo) {\n                            vm.showPaymentFrame = true;\n                        }\n                        vm.ignoreFailedServices = true;\n                    },\n                    disableOutsideCloseClick: true\n                });\n            });\n        }\n\n        if (\n            backend.getParam('ffp.enable') &&\n            (vm.orderInfo.hasBonusCard || vm.orderInfo.ffpSumm)\n        ) {\n            backend.ffpBonus().then(function (resp) {\n                vm.ffpBonus = resp.total || 0;\n            });\n        }\n\n        if (vm.orderInfo && vm.orderInfo.plainFlights) {\n            vm.hasVKO = vm.orderInfo.plainFlights.some(function (flight) {\n                return flight.originport === 'VKO';\n            });\n        }\n\n    };\n\n    function retryPayment(removeInsuranceAeroexpress) {\n        vm.loading = true;\n        backend.retryRegister(removeInsuranceAeroexpress).then(function (resp) {\n            if (resp.pnr && resp.lastName) {\n                $window.location = './order?pnr=' + resp.pnr + '&lastName=' + resp.lastName;\n            } else if (resp.eraseAeroexpressBecauseOfCurrency || resp.eraseInsuranceBecauseOfCurrency) {\n                fancyboxTools.openHandler('popupChangeCurrencyError', false, {\n                    eraseAeroexpressBecauseOfCurrency: resp.eraseAeroexpressBecauseOfCurrency,\n                    eraseInsuranceBecauseOfCurrency: resp.eraseInsuranceBecauseOfCurrency,\n                    mode: 'retryRegister',\n                    submitCallback: retryPayment\n                });\n            }\n            vm.loading = false;\n        }, function (resp) {\n            vm.loading = false;\n            vm.errorMessage = resp.error;\n        });\n    }\n\n    function bindOrder() {\n        if (!vm.orderInfo.header || !vm.orderInfo.header.regnum) {\n            return;\n        }\n        vm.loading = true;\n        backend.bindOrder(vm.orderInfo.header.regnum, vm.orderInfo.header.lastName).then(function () {\n            vm.loading = false;\n            vm.orderInfo.bindAlowed = false;\n            vm.showBindOrderSuccessMessage = true;\n            $timeout(function () {\n                vm.showBindOrderSuccessMessage = false;\n            }, 10000);\n        }, function () {\n            vm.loading = false;\n            vm.showBindOrderFailMessage = true;\n            $timeout(function () {\n                vm.showBindOrderFailMessage = false;\n            }, 10000);\n        });\n    }\n\n    function checkAllPassengersHavePaidService(name) {\n        var result = true;\n        vm.orderInfo.passengers.forEach(function (passenger, passengerNum) {\n            if (\n\t\t\t\tvm.orderInfo.allExtraServicesByPassengers &&\n\t\t\t\tvm.orderInfo.allExtraServicesByPassengers[passengerNum] &&\n\t\t\t\tvm.orderInfo.allExtraServicesByPassengers[passengerNum].passengerSegmentServices\n\t\t\t) {\n\t\t\t\tvm.orderInfo.allExtraServicesByPassengers[passengerNum].passengerSegmentServices.forEach(\n\t\t\t\t\tfunction (segmentServices) {\n\t\t\t\t\t\tvar segmentWantedService = _.findWhere(segmentServices, { code: name });\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t!segmentServices || !segmentWantedService ||\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tsegmentWantedService &&\n\t\t\t\t\t\t\t\tsegmentWantedService.serviceItem &&\n\t\t\t\t\t\t\t\tsegmentWantedService.serviceItem.status !== 'ISSUED_WITH_EMD'\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tresult = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tresult = false;\n\t\t\t}\n        });\n        return result;\n    }    \n\n    function clearSession() {\n        backend.clearSession().then(redirect.goToSearchOrder);\n    }\n\n}\n\n},{}],10:[function(require,module,exports){\n\"use strict\";\nangular.module('app').component('popupMealRossiya', {\n\ttemplateUrl: 'components/popup-meal-rossiya/popup-meal-rossiya.html',\n\tcontroller: ['utils', '$scope', PopupMealRossiyaController],\n\tcontrollerAs: 'vm',\n\tbindings: {\n\t\tmealMenu: '=menu',\n\t\tpassenger: '=passenger',\n\t\tcurrentPassengerIndex: '=',\n\t\tcurrentFlightIndex: '=',\n\t\tpassengers: '=passengers',\n\t\tflight: '=flight',\n\t\tmealCountChangeHandler: '=handler',\n\t\tclearPassengerFlightMeal: '&remove',\n\t\tgetPassengerFlightMeal: '=get',\n\t\tsubgroups: '=subgroups',\n\t\tmealImagesPath: '=path',\n\t\tservice: '=',\n\t\tselectFlightPassenger: '=select',\n\t\tgetLimitStatus: '=limit',\n\t\tmealSelect: '=',\n\t\tgetMealInfo: '=',\n\t\tissuedMeal: '='\n\t}\n});\n\nfunction PopupMealRossiyaController(utils, $scope) {\n\n\tvar vm = this;\n\tvm.close = jQuery.fancybox.close;\n\tvm.mealMenuSubgroupMobileChange = mealMenuSubgroupMobileChange;\n\tvm.mealMenuSubgroup = false;\n\tvm.mealMenuSubgroupMobile = 'false';\n\tvm.subgroupItems = utils.createOptionsForUiSelect(vm.subgroups, 'all');\n\tvm.switchNext = switchNext;\n\tvm.switchPrev = switchPrev;\n\tvm.arrayString = arrayString;\n\tvm.getGroupMeal = getGroupMeal;\n\n\tvm.detailedView = {open: false};\n\tvm.setItemIndex = setItemIndex;\n\tvm.closeItemPopup = closeItemPopup;\n\tvm.nextItemPopup = nextItemPopup;\n\tvm.prevItemPopup = prevItemPopup;\n\n\tvm.totalAmount = totalAmount;\n\n\tfunction setItemIndex(mealIndex) {\n\n\t\tvm.detailedView.open = true;\n\t\tvm.detailedView.mealIndex = mealIndex;\n\n\t}\n\n\tfunction closeItemPopup() {\n\t\tvm.detailedView.open = false;\n\t}\n\n\tfunction nextItemPopup() {\n\n\t\tif (vm.detailedView.mealIndex < (vm.mealMenu.length - 1)) {\n\t\t\tvm.detailedView.mealIndex++;\n\t\t} else {\n\t\t\tvm.detailedView.mealIndex = 0;\n\t\t}\n\n\t}\n\n\tfunction prevItemPopup() {\n\n\t\tif (vm.detailedView.mealIndex > 0) {\n\t\t\tvm.detailedView.mealIndex--;\n\t\t} else {\n\t\t\tvm.detailedView.mealIndex = vm.mealMenu.length - 1;\n\t\t}\n\n\t}\n\n\tfunction setAvailablePassengers() {\n\t\tvm.availablePassengers = vm.passengers.filter(function (passenger, index) {\n\t\t\treturn (\n\t\t\t\tvm.service.availableByPassengerSegments[index] &&\n\t\t\t\tvm.service.availableByPassengerSegments[index][vm.currentFlightIndex]\n\t\t\t);\n\t\t});\n\t}\n\n\t$scope.$watch('vm.currentFlightIndex', function () {\n\t\tsetAvailablePassengers();\n\t});\n\n\tfunction mealMenuSubgroupMobileChange() {\n\t\tif (vm.mealMenuSubgroupMobile === false) {\n\t\t\tvm.mealMenuSubgroup = false;\n\t\t} else {\n\t\t\tvm.mealMenuSubgroup = vm.mealMenuSubgroupMobile * 1;\n\t\t}\n\t}\n\n\tfunction switchNext() {\n\t\tvar successSwitch = false;\n\t\tfor (var i = vm.currentPassengerIndex + 1; i < vm.passengers.length; i++) {\n\t\t\tif (\n\t\t\t\tvm.service.availableByPassengerSegments[i] &&\n\t\t\t\tvm.service.availableByPassengerSegments[i][vm.currentFlightIndex]\n\t\t\t) {\n\t\t\t\tvm.selectFlightPassenger(vm.currentFlightIndex, i);\n\t\t\t\tsuccessSwitch = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (!successSwitch) {\n\t\t\tfor (var j = 0; j < vm.passengers.length; j++) {\n\t\t\t\tif (\n\t\t\t\t\tvm.service.availableByPassengerSegments[j] &&\n\t\t\t\t\tvm.service.availableByPassengerSegments[j][vm.currentFlightIndex]\n\t\t\t\t) {\n\t\t\t\t\tvm.selectFlightPassenger(vm.currentFlightIndex, j);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction switchPrev() {\n\t\tvar successSwitch = false;\n\t\tfor (var i = vm.currentPassengerIndex - 1; i > -1; i--) {\n\t\t\tif (\n\t\t\t\tvm.service.availableByPassengerSegments[i] &&\n\t\t\t\tvm.service.availableByPassengerSegments[i][vm.currentFlightIndex]\n\t\t\t) {\n\t\t\t\tvm.selectFlightPassenger(vm.currentFlightIndex, i);\n\t\t\t\tsuccessSwitch = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (!successSwitch) {\n\t\t\tfor (var j = vm.passengers.length - 1; j > -1; j--) {\n\t\t\t\tif (\n\t\t\t\t\tvm.service.availableByPassengerSegments[j] &&\n\t\t\t\t\tvm.service.availableByPassengerSegments[j][vm.currentFlightIndex]\n\t\t\t\t) {\n\t\t\t\t\tvm.selectFlightPassenger(vm.currentFlightIndex, j);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction arrayString(arrays) {\n\n\t\tif(!Array.isArray(arrays)) return;\n\n\t\tvar total = arrays.reduce(function(flat, current) {\n\t\t\treturn flat.concat(current);\n\t\t}, []);\n\n\t\tif(vm.mealMenuSubgroup === false ) return total;\n\n\t\treturn arrays;\n\t}\n\n\tfunction getGroupMeal(meal, arrays) {\n\n\t\tfor (var i = 0; i < arrays.length; i++) {\n\t\t\tfor(var j = 0; j < arrays[i].length; j++) {\n\t\t\t\tif (arrays[i][j]['rfisc'] == meal['rfisc']) {\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction totalAmount() {\n\t\tvm.mealMenu = vm.mealMenu || [];\n\n\t\tvar totalSumm = 0;\n\n\t\tfor(var i = 0; i < vm.mealMenu.length; i++) {\n\t\t\tif('alreadySelectedPrice' in vm.mealMenu[i]) {\n\t\t\t\t\ttotalSumm += +vm.mealMenu[i].alreadySelectedPrice\n\t\t\t}\n\t\t}\n\n\t\treturn totalSumm;\n\t}\n\n}\n\n},{}],11:[function(require,module,exports){\n\"use strict\";\nangular.module('app').run(['$rootScope', function ($rootScope) {\n    $rootScope.hasSomeTrueInArray = function (list) {\n        if (list && list.length) {\n            return list.some(function (item) {\n                return !!item;\n            });\n        }\n        return false;\n    }\n}]);\n\n},{}],12:[function(require,module,exports){\n\"use strict\";\nrequire('./components/popup-meal-rossiya/popup-meal-rossiya');\nrequire('./components/es-meal-rossiya/es-meal-rossiya');\nrequire('./components/es-seat-rossiya/es-seat-rossiya');\nrequire('./components/order-rossiya/order-rossiya');\nrequire('./components/baby-bassinet-icon/baby-bassinet-icon');\nrequire('./components/baby-bassinet-icon-legend/baby-bassinet-icon-legend');\nrequire('./components/baby-bassinet-icon-tooltip/baby-bassinet-icon-tooltip');\nrequire('./components/insurance-fares-rossiya/insurance-fares-rossiya');\nrequire('./components/insurance-fares-switch-all/insurance-fares-switch-all');\nrequire('./components/es-insurance-rossiya/es-insurance-rossiya');\nrequire('./hasSomeTrueInArray');\n},{\"./components/baby-bassinet-icon-legend/baby-bassinet-icon-legend\":1,\"./components/baby-bassinet-icon-tooltip/baby-bassinet-icon-tooltip\":2,\"./components/baby-bassinet-icon/baby-bassinet-icon\":3,\"./components/es-insurance-rossiya/es-insurance-rossiya\":4,\"./components/es-meal-rossiya/es-meal-rossiya\":5,\"./components/es-seat-rossiya/es-seat-rossiya\":6,\"./components/insurance-fares-rossiya/insurance-fares-rossiya\":7,\"./components/insurance-fares-switch-all/insurance-fares-switch-all\":8,\"./components/order-rossiya/order-rossiya\":9,\"./components/popup-meal-rossiya/popup-meal-rossiya\":10,\"./hasSomeTrueInArray\":11}]},{},[12]);\n"]}